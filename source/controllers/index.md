## Контроллеры

Контроллеры очень похожи на компоненты. Сходство настолько сильное, что в будущих версиях Ember, контроллеры полностью заменят на них. В настоящий момент компонентам нельзя назначить маршрут. Но в будущем рекомендуется заменять все контроллеры на компоненты.

Из-за этого в современных приложениях Ember нечасто используют контроллеры. Если разработчики и делают это, то контроллеры строго ограничиваются двумя применениями:

* Контроллеры сохраняют состояние на основе текущего маршрута. В целом модели будут иметь свойства, сохраненные на сервере, пока контроллеры будут иметь свойства, которые вашему приложению не нужно сохранять на сервере.
* Действия пользователя передаются через уровень контроллера, когда следуют из компонента в маршрут.

Контекст шаблонов, которые отображаются маршрутом, это соответствующий контроллер. Ember следует «программированию по соглашениям». Это значит, что вы должны создавать контроллер, только если он вам нужен. Если нет, то все будет «просто работать».

Давайте изучим пример маршрута, который показывает пост блога. Допустим, что есть модель `BlogPost`, которая представлена в шаблоне `blog-post`.

Модель `BlogPost` будет иметь свойства вроде:

* `title`
* `intro`
* `body`
* `author`

Ваш шаблон будет привязан к этим свойствам в шаблоне `blog-post`:

`app/templates/blog-post.hbs`
```hbs
<h1>{{model.title}}</h1>
<h2>by {{model.author}}</h2>

<div class="intro">
  {{model.intro}}
</div>
<hr>
<div class="body">
  {{model.body}}
</div>
```

В этом простом примере у нас пока что нет каких-либо специфичных для отображения свойств или действий. Пока наше свойство `model` в контроллере просто действует как проход (или «посредник») для свойств модели. (Запомните, что контроллер получает модель, которую представляет из своего обработчика маршрута).

Скажем, нам нужно добавить особенность, которая даст пользователю возможность переключать отображение секции body. Мы можем сделать это, если сначала скорректируем шаблон, чтобы показывать body, только если значение нового свойства `isExpanded` будет true.

`app/templates/blog-post.hbs`
```hbs
<h1>{{model.title}}</h1>
<h2>by {{model.author}}</h2>

<div class='intro'>
  {{model.intro}}
</div>
<hr>

{{#if isExpanded}}
  <button {{action "toggleBody"}}>Hide Body</button>
  <div class="body">
    {{model.body}}
  </div>
{{else}}
  <button {{action "toggleBody"}}>Show Body</button>
{{/if}}
```

В контроллере вы затем можете определить, что совершает действие внутри hook `actions`, точно так же как вы бы сделали в компоненте:

`app/controllers/blog-post.js`
```js
export default Ember.Controller.extend({
  actions: {
    toggleBody() {
      this.toggleProperty('isExpanded');
    }
  }
});
```