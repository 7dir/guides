Вы можете воспринимать компонент как «черный ящик» функциональности интерфейса пользователя. К настоящему времени вы узнали, как родительские компоненты могут передавать атрибуты потомкам, и как эти компоненты могут использовать атрибуты от JavaScript и от своего шаблона одновременно.

Но что насчет обратного направления? Как передать поток данных от компонента к родителю? В Ember компоненты используют **действия**, чтобы связывать события и изменения.

Давайте взглянем на простой пример того, как компонент может использовать действие, чтобы связаться с родителем.

Представьте, что мы создаем приложение, где у пользователей есть аккаунты. Нам нужно сделать интерфейс для пользователей, чтобы дать им возможность удалить аккаунт. Так как мы не хотим, чтобы пользователи случайно это сделали, мы создадим кнопку, которая потребуется пользователю для подтверждения некоторого действия.

Когда мы создаем компонент «кнопка для подтверждения», нам понадобится повторно его использовать по всему приложению.

## Создание компонента

Давайте назовем наш компонент `button-with-confirmation`. Мы можем создать его так:

```bash
ember generate component button-with-confirmation
```

Мы будем использовать компонент в шаблоне примерно таким образом:

`app/templates/components/user-profile.hbs`
```hbs
{{button-with-confirmation text="Click OK to delete your account."}}
```

Также нам нужно использовать компонент в других местах, как здесь:

`app/templates/components/send-message.hbs`
```js
{{button-with-confirmation text="Click OK to send your message."}}
```

## Разработка действия

При реализации действия в компоненте процесс нужно разделить на два шага:

1. В родительском компоненте: решите, какую вы хотите получить реакцию на действие. Здесь мы хотим получить действие удаления пользовательского аккаунта в одном месте и отправку сообщения в другом.
2. В компоненте: определите, когда что-либо происходит, и когда сообщать об этом внешнему миру. Здесь нам нужно запустить внешнее действие (удаление аккаунта или отправку сообщения) после того, как пользователь щелкнет по кнопке и подтвердит действие.

Давайте проделаем все это шаг за шагом.

## Реализация действия

Сначала давайте определим в родительском компоненте, что мы хотим увидеть, когда пользователь нажмет на кнопку и подтвердит действие. В нашем случае нужно найти аккаунт пользователя и удалить его.

В Ember каждый компонент может иметь свойство `actions`, куда вы вкладываете функции, которые могут вызвать потомки компонента или пользователь [при взаимодействии с самим компонентом](http://emjs.ru/v2/templates/actions/).

Давайте взглянем на файл JavaScript родительского компонента. В этом примере представьте, что у нас есть родительский компонент под именем `user-profile`, который показывает профиль пользователя.

Мы реализуем действие на родительском компоненте под названием `userDidDeleteAccount()`, которое при вызове получает предполагаемый [сервис](http://guides.emberjs.com/v2.1.0/applications/services/) `login` и вызывает метод сервиса `deleteUser()`.

`app/components/user-profile.js`
```js
export default Ember.Component.extend({
  login: Ember.inject.service(),

  actions: {
    userDidDeleteAccount() {
      this.get('login').deleteUser();
    }
  }
});
```

Теперь мы реализовали действие, но не указали Ember, в какой момент мы хотим его запускать. Это будет следующим шагом.

## Разработка дочернего компонента

Далее, давайте реализуем следующую логику: пользователь подтверждает, что хочет принять действие компонента:

`app/components/button-with-confirmation.js`
```js
export default Ember.Component.extend({
  tagName: 'button',
  click() {
    if (confirm(this.get('text'))) {
      // trigger action on parent component
    }
  }
});
```

## Передача действия компоненту

Теперь нам нужно лишь сделать так, чтобы событие `onConfirm()` в компоненте `button-with-confirmation()` запускало действие `userDidDeleteAccount()` в компоненте `user-profile`. Нужно знать одну важную вещь о действиях: они **лишь функции**, которые вы можете вызвать, как и любой другой метод в компоненте. Поэтому их можно передать из одного компонента другому таким образом:

`app/components/user-profile.hbs`
```hbs
{{button-with-confirmation text="Click here to delete your account." onConfirm=(action 'userDidDeleteAccount')}}
```

Этот фрагмент сообщает «взять действие `userDidDeleteAccount` от предка и сделать его доступным для дочернего компонента как `onConfirm`».

Мы можем сделать подобное для компонента `send-message`:

`app/templates/components/send-message.hbs`
```hbs
{{button-with-confirmation text="Click to send your message." onConfirm=(action 'sendMessage')}}
```

Теперь можно использовать `onConfirm` в дочернем компоненте, чтобы вызвать действие в предке:

`app/components/button-with-confirmation.js`
```js
export default Ember.Component.extend({
  tagName: 'button',
  click() {
    if (confirm(this.get('text'))) {
      this.get('onConfirm')();
    }
  }
});
```

`this.get('onConfirm')` вернет переданную от предка функцию в качестве значения `onConfirm`, и следующие `()` вызовут функцию.

Как и обычные атрибуты, действия могут быть свойствами компонента. Единственная разница в том, что свойство устанавливается функции, которая знает, как запускать поведение.

Так проще запомнить, как добавлять действие компоненту. Это как передача атрибута, но вы используете помощника `action`, чтобы вместо него передать функцию.

Действия в компонентах позволяют вам отделять возникновение события от способа его обработки, что дает блочные, приспособленные для повторного использования компоненты.